%% -*- erlang -*-
{erl_opts, [debug_info, {parse_transform, lager_transform}]}.

{deps, [{barrel,
         {git, "https://gitlab.com/barrel-db/barrel.git", {tag, "0.1.1"}}},

        {barrel_http,
         {git, "https://gitlab.com/barrel-db/barrel-http.git", {tag, "0.1.1"}}}
       ]
}.

{relx, [
        {release, {'barrel', "0.1.0"}, [barrel_http]},
        {sys_config, "config/test.config"},
        {dev_mode, true},
        {include_erts, false},
        {extended_start_script, true},
        {overlay,
         [{copy, "{{output_dir}}/bin/barrel", "bin/start_http"}
         ]}
       ]
}.

{profiles,
 [{prod,
   [{relx,
     [{sys_config, "./config/test.config"},
      {dev_mode, false},
      {include_erts, true},
      {extended_start_script, true}
     ]}
   ]},

  {test, []}
]}.
